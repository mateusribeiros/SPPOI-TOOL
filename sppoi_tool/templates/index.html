{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="description" content="" />
		<meta name="author" content="" />
		<title>SPPOI Tool</title>
		<link rel="icon" type="image/x-icon" href="{% static 'bootstrap/assets/logo.png' %}" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
		<link rel="preconnect" href="https://fonts.gstatic.com" />
		<link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
		<link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
		<link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
		<link href="{% static 'bootstrap/css/styles.css'%}" rel="stylesheet" />
		{% if turnstile_enabled %}
		<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
		{% endif %}
		<style>
			#captcha-overlay {
				position: fixed;
				inset: 0;
				background: rgba(0, 0, 0, 0.65);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 9999;
			}
			#captcha-card {
				background: white;
				padding: 24px 28px;
				border-radius: 12px;
				max-width: 420px;
				width: 95%;
				box-shadow: 0 20px 50px rgba(0,0,0,0.2);
			}
			#captcha-card h5 { margin-bottom: 12px; }
		</style>
	</head>
	<body id="page-top" class="pt-5">
		{% if turnstile_enabled %}
		<div id="captcha-overlay">
			<div id="captcha-card">
				<h5 data-i18n="security_check">{% trans "Verificação de Segurança" %}</h5>
				<p class="text-muted" data-i18n="confirm_human">{% trans "Confirme que você é humano para continuar." %}</p>
				<form id="captcha-form" method="post">
					{% csrf_token %}
					<div class="cf-turnstile" data-sitekey="{{ turnstile_site_key }}" data-callback="onCaptchaSuccess"></div>
					<button id="captcha-submit" class="btn btn-primary mt-3" type="button" disabled data-i18n="continue">{% trans "Continuar" %}</button>
					<div id="captcha-error" class="text-danger mt-2" style="display:none;"></div>
				</form>
			</div>
		</div>
		{% endif %}
		<nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav">
			<div class="container px-5">
				<a class="navbar-brand fw-bold">SPPOI Tool</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
					<span data-i18n="menu">{% trans "Menu" %}</span>
					<i class="bi-list"></i>
				</button>
				<div class="collapse navbar-collapse" id="navbarResponsive">
					<ul class="navbar-nav ms-auto me-4 my-3 my-lg-0">
						<li class="nav-item"><a class="nav-link me-lg-3" href="#tutorial" data-i18n="tutorial">{% trans "Tutorial" %}</a></li>
					</ul>
					<div class="me-3">
						<select id="lang-toggle" class="form-select form-select-sm">
							<option value="pt">Português (Brasil)</option>
							<option value="en">English</option>
						</select>
					</div>
					<a href="{% url 'chat_new' %}" 
						class="btn rounded-pill px-3 mb-2 mb-lg-0 text-white" 
						style="background-color: #124559;">
							<span class="d-flex align-items-center">
								<i class="bi-chat-text-fill me-2"></i>
								<span class="small start-btn shadow-sm" data-i18n="new">{% trans "Novo" %}</span>
							</span>
						</a>
				</div>
			</div>
		</nav>
		<header class="masthead">
			<div class="container px-5">
				<div class="row gx-5 align-items-center">
					<div class="col-lg-6">
						<div class="mb-5 mb-lg-0 text-center text-lg-start">
							<h1 class="h2 display-4 lh-2 mb-5" data-i18n="hero_title">{% trans "Transforme a Integração de Sistemas em uma Decisão Estratégica com Inteligência e Padrões Validados!" %}</h1>
							<p class="lead fw-normal text-muted mb-5" data-i18n="hero_subtitle">{% trans "Apresentamos uma ferramenta inovadora, desenvolvida com base nos princípios do Structured Process for Pattern-Oriented Integration (SPPOI), que revoluciona a forma como arquitetos de software e desenvolvedores enfrentam os desafios da integração entre sistemas de informação." %}</p>
						</div>
					</div>
					<div class="col-lg-6 text-center">
						<div class="position-relative d-inline-block">
						 <img src="{% static 'bootstrap/assets/img/ai_image1.jpg' %}" alt="{% trans 'Imagem IA principal' %}" 
							   class="img-fluid rounded shadow-sm" style="max-width: 80%; bottom: 30px;">
                          
						 <img src="{% static 'bootstrap/assets/img/ai_image2.jpg' %}" alt="{% trans 'Imagem IA menor' %}" 
							   class="img-fluid rounded shadow-sm position-absolute" 
							   style="max-width: 40%; bottom: -20px; right: -30px;">
						</div>
					  </div>
				</div>
			</div>
		</header>
		<aside class="text-center text-white py-5" style="background: linear-gradient(90deg, #124559, #AEC3B0);">
			<div class="container px-5">
				<div class="row gx-5 justify-content-center">
					<div class="col-xl-8">
						<div class="h2 fs-1 mb-4" data-i18n="hero_quote">{% trans '"Da análise à decisão: sua integração guiada por evidências e boas práticas!"' %}</div>
					</div>
				</div>
			</div>
		</aside>
		<section id="tutorial" class="py-5 bg-white">
			<div class="container">
				<h2 class="text-center text-black mb-4" data-i18n="video_tutorial">{% trans "Tutorial em Vídeo" %}</h2>
				<div class="text-center text-muted mb-3" data-i18n="video_subtitles_hint">
					{% trans "Para assistir com legendas em inglês, clique em configurações, Legendas/CC e \"Traduzir Automaticamente\" no player do YouTube." %}
				</div>
				<div class="ratio ratio-16x9 rounded shadow border border-secondary overflow-hidden">
					<iframe
						src="https://www.youtube.com/embed/_wO8UL0VdPk?rel=0&modestbranding=1&playsinline=1&enablejsapi=1&origin=https://sppoitool.xyz"
						title="YouTube video player"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
						allowfullscreen
						referrerpolicy="strict-origin-when-cross-origin"
					></iframe>
				</div>
			</div>
		</section>    
    
		<footer class="bg-black text-center py-5">
			<div class="container px-5">
				<div class="text-white-50 small">
					<div class="mb-2" data-i18n="copyright">{% trans "© UFG - SPPOI Tool 2025. Todos os direitos reservados." %}</div>
					<a href="#!" data-i18n="privacy">{% trans "Privacidade" %}</a>
					<span class="mx-1">&middot;</span>
					<a href="#!" data-i18n="terms">{% trans "Termos" %}</a>
				</div>
			</div>
		</footer>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
		<script src="{% static 'bootstrap/js/scripts.js'%}"></script>
		<script>
			const translations = {
				pt: {
					security_check: 'Verificação de Segurança',
					confirm_human: 'Confirme que você é humano para continuar.',
					continue: 'Continuar',
					menu: 'Menu',
					tutorial: 'Tutorial',
					new: 'Novo',
					hero_title: 'Transforme a Integração de Sistemas em uma Decisão Estratégica com Inteligência e Padrões Validados!',
					hero_subtitle: 'Apresentamos uma ferramenta inovadora, desenvolvida com base nos princípios do Structured Process for Pattern-Oriented Integration (SPPOI), que revoluciona a forma como arquitetos de software e desenvolvedores enfrentam os desafios da integração entre sistemas de informação.',
					hero_quote: '"Da análise à decisão: sua integração guiada por evidências e boas práticas!"',
					video_tutorial: 'Tutorial em Vídeo',
					video_unsupported: 'Seu navegador não suporta o elemento de vídeo.',
					video_subtitles_hint: 'Para assistir com legendas em inglês, clique em configurações, Legendas/CC e "Traduzir Automaticamente" no player do YouTube.',
					copyright: '© UFG - SPPOI Tool 2025. Todos os direitos reservados.',
					privacy: 'Privacidade',
					terms: 'Termos',
					captcha_invalid: 'Captcha inválido.'
				},
				en: {
					security_check: 'Security Verification',
					confirm_human: 'Please confirm you are human to continue.',
					continue: 'Continue',
					menu: 'Menu',
					tutorial: 'Tutorial',
					new: 'New',
					hero_title: 'Transform Systems Integration into a Strategic Decision with Intelligence and Validated Patterns!',
					hero_subtitle: 'We present an innovative tool, built on the principles of the Structured Process for Pattern-Oriented Integration (SPPOI), which transforms how software architects and developers tackle information systems integration challenges.',
					hero_quote: '"From analysis to decision: your integration guided by evidence and best practices!"',
					video_tutorial: 'Video Tutorial',
					video_unsupported: 'Your browser does not support the video element.',
					video_subtitles_hint: 'To watch with English subtitles, click Settings, select Subtitles/CC, and choose Auto-translate in the YouTube player.',
					copyright: '© UFG - SPPOI Tool 2025. All rights reserved.',
					privacy: 'Privacy',
					terms: 'Terms',
					captcha_invalid: 'Invalid captcha.'
				}
			};

			let currentLang = localStorage.getItem('lang') || 'pt';
			const t = (key) => (translations[currentLang] && translations[currentLang][key]) || translations.pt[key] || key;

			function applyTranslations() {
				document.documentElement.lang = currentLang === 'pt' ? 'pt-br' : 'en';
				document.querySelectorAll('[data-i18n]').forEach(el => {
					el.textContent = t(el.dataset.i18n);
				});
			}

			const langToggle = document.getElementById('lang-toggle');
			if (langToggle) {
				langToggle.value = currentLang;
				langToggle.addEventListener('change', (e) => {
					currentLang = e.target.value === 'en' ? 'en' : 'pt';
					localStorage.setItem('lang', currentLang);
					applyTranslations();
				});
			}

			applyTranslations();
		</script>
		{% if turnstile_enabled %}
		<script>
			const csrfToken = document.querySelector('input[name=csrfmiddlewaretoken]')?.value || '';
			let captchaToken = null;

			function onCaptchaSuccess(token) {
				captchaToken = token;
				const submitBtn = document.getElementById('captcha-submit');
				if (submitBtn) submitBtn.disabled = false;
			}

			document.getElementById('captcha-submit').addEventListener('click', async () => {
				const errorEl = document.getElementById('captcha-error');
				errorEl.style.display = 'none';

				const turnstileInput = document.querySelector('input[name="cf-turnstile-response"]');
				const tokenValue = (turnstileInput && turnstileInput.value) || captchaToken || '';

				const form = new FormData();
				form.append('cf-turnstile-response', tokenValue);

				const resp = await fetch('{% url "captcha_verify" %}', {
					method: 'POST',
					headers: {
						'X-CSRFToken': csrfToken,
					},
					body: form
				});
				const data = await resp.json();
				if (data.success) {
					document.getElementById('captcha-overlay').style.display = 'none';
				} else {
					errorEl.textContent = data.error || t('captcha_invalid');
					errorEl.style.display = 'block';
				}
			});
		</script>
		{% endif %}
	</body>
</html>
